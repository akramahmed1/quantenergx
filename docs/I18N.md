# QuantEnerGx Internationalization (i18n) Setup Guide

## Overview

QuantEnerGx supports multiple languages with full internationalization capabilities, including Right-to-Left (RTL) language support for Arabic and other RTL languages. The platform complies with global accessibility standards and energy industry localization requirements.

## Supported Languages

- **English** (en) - Default language
- **Arabic** (ar) - RTL support
- **Spanish** (es)
- **French** (fr)
- **German** (de)
- **Chinese Simplified** (zh)

## Technology Stack

- **i18next**: Core internationalization framework
- **react-i18next**: React integration
- **i18next-browser-languagedetector**: Automatic language detection
- **i18next-http-backend**: Dynamic translation loading

## Frontend Setup

### 1. Installation

The i18n dependencies are already included in the project:

```bash
cd frontend
npm install i18next react-i18next i18next-browser-languagedetector i18next-http-backend
```

### 2. Configuration

The i18n configuration is located in `src/i18n/index.ts`:

```typescript
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';
import Backend from 'i18next-http-backend';

i18n
  .use(Backend)
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    lng: 'en', // Default language
    fallbackLng: 'en',
    
    // Energy industry specific namespaces
    defaultNS: 'common',
    ns: ['common', 'energy', 'trading', 'analytics', 'compliance'],
    
    // Support for RTL languages
    supportedLngs: ['en', 'ar', 'es', 'fr', 'de', 'zh'],
  });
```

### 3. Translation Files

Translation files are stored in `public/locales/{language}/{namespace}.json`:

```
public/
  locales/
    en/
      common.json
      energy.json
      trading.json
    ar/
      common.json
      energy.json
      trading.json
```

Example translation file (`public/locales/en/energy.json`):

```json
{
  "power": "Power",
  "voltage": "Voltage",
  "current": "Current",
  "energy_consumption": "Energy Consumption",
  "carbon_footprint": "Carbon Footprint",
  "renewable_energy": "Renewable Energy"
}
```

### 4. Using Translations in Components

```typescript
import { useTranslation } from 'react-i18next';

const EnergyComponent = () => {
  const { t } = useTranslation(['energy', 'common']);
  
  return (
    <div>
      <h1>{t('energy:power')}</h1>
      <p>{t('energy:energy_consumption')}</p>
      <button>{t('common:save')}</button>
    </div>
  );
};
```

### 5. Language Switching

The `LanguageSwitcher` component handles language changes:

```typescript
import LanguageSwitcher from './components/common/LanguageSwitcher';

// Select dropdown variant
<LanguageSwitcher variant="select" showLabel={true} />

// Menu variant for compact spaces
<LanguageSwitcher variant="menu" showLabel={false} />
```

### 6. RTL Support

The `useLanguage` hook provides RTL detection and utilities:

```typescript
import { useLanguage } from './hooks/useLanguage';
import { getRTLStyles } from './utils/rtl';

const Component = () => {
  const { isRTL } = useLanguage();
  
  return (
    <div style={getRTLStyles(isRTL)}>
      Content automatically adapts to RTL
    </div>
  );
};
```

RTL utility functions:

```typescript
// Text alignment and direction
getRTLStyles(isRTL)

// Margin direction
getMarginDirection(isRTL, 16)

// Padding direction  
getPaddingDirection(isRTL, 8)

// Float direction
getFloatDirection(isRTL)

// Energy-specific widget styles
getEnergyWidgetStyles(isRTL)
```

## Backend API Support

### Language Detection Endpoint

```http
GET /api/v1/localization/languages/supported
```

Response:
```json
{
  "languages": [
    {"code": "en", "name": "English", "rtl": false},
    {"code": "ar", "name": "العربية", "rtl": true}
  ]
}
```

### Translation Endpoint

```http
GET /api/v1/localization/translations/{language_code}?namespace=energy
```

Response:
```json
{
  "energy": {
    "power": "القدرة",
    "voltage": "الجهد",
    "current": "التيار"
  }
}
```

### Locale Formatting

```http
GET /api/v1/localization/locale/formats?language_code=ar
```

Response:
```json
{
  "date_format": "DD/MM/YYYY",
  "time_format": "HH:mm:ss",
  "number_format": "1٬234٫56",
  "currency_symbol": "ر.س",
  "decimal_separator": "٫",
  "thousands_separator": "٬"
}
```

## Energy Industry Localization

### Technical Terms

Energy industry terms are consistently translated across languages:

- **Power** → القدرة (Arabic), Potencia (Spanish)
- **Voltage** → الجهد (Arabic), Voltaje (Spanish)
- **Frequency** → التردد (Arabic), Frecuencia (Spanish)
- **Load Forecasting** → توقع الأحمال (Arabic)

### Compliance Terminology

Regulatory terms maintain consistency:

- **NERC CIP** → NERC CIP (unchanged globally)
- **FERC Compliance** → امتثال FERC (Arabic)
- **Grid Stability** → استقرار الشبكة (Arabic)

### Units and Measurements

- **MW/MWh** → Maintained globally for consistency
- **kV** → Maintained globally
- **Hz** → Maintained globally

## RTL (Right-to-Left) Implementation

### Automatic Detection

The system automatically detects RTL languages:

```typescript
const rtlLanguages = ['ar', 'he', 'fa'];
const isRTL = rtlLanguages.includes(currentLanguage);
```

### CSS and Styling

RTL styles are applied automatically:

```css
[dir="rtl"] .widget {
  text-align: right;
  direction: rtl;
}

[dir="rtl"] .chart-container {
  /* Charts maintain LTR for data consistency */
  direction: ltr;
}
```

### Component Adaptation

Components automatically adapt to RTL:

- Text alignment
- Icon positioning
- Navigation flow
- Chart orientations (data remains LTR)

## Best Practices

### 1. Namespace Organization

Organize translations by feature areas:

```
common/     - Shared UI elements
energy/     - Energy-specific terms
trading/    - Trading and market terms
analytics/  - Analytics and reporting
compliance/ - Regulatory and compliance
```

### 2. Key Naming Convention

Use descriptive, hierarchical keys:

```json
{
  "energy": {
    "generation": {
      "solar": "Solar Generation",
      "wind": "Wind Generation",
      "hydro": "Hydro Generation"
    }
  }
}
```

### 3. Pluralization

Handle plurals correctly:

```json
{
  "device": "Device",
  "device_plural": "Devices",
  "device_count": "{{count}} Device",
  "device_count_plural": "{{count}} Devices"
}
```

### 4. Variable Interpolation

Use interpolation for dynamic content:

```json
{
  "welcome_message": "Welcome, {{userName}}!",
  "power_reading": "Current power: {{value}} {{unit}}"
}
```

### 5. Context-Aware Translations

Provide context for translators:

```json
{
  "load": "Load", // Context: electrical load, not loading
  "frequency": "Frequency", // Context: electrical frequency (Hz)
  "trip": "Trip" // Context: circuit breaker trip
}
```

## Testing i18n

### Unit Tests

Test translation loading and language switching:

```typescript
import { render, screen } from '@testing-library/react';
import { I18nextProvider } from 'react-i18next';
import i18n from '../i18n';

test('renders translated content', () => {
  render(
    <I18nextProvider i18n={i18n}>
      <EnergyComponent />
    </I18nextProvider>
  );
  
  expect(screen.getByText('Power')).toBeInTheDocument();
});
```

### RTL Testing

Test RTL layout and functionality:

```typescript
test('applies RTL styles for Arabic', () => {
  i18n.changeLanguage('ar');
  render(<Component />);
  
  expect(document.documentElement.dir).toBe('rtl');
});
```

## Deployment Considerations

### CDN Distribution

Serve translation files from CDN for better performance:

```javascript
i18n.init({
  backend: {
    loadPath: 'https://cdn.quantenergx.com/locales/{{lng}}/{{ns}}.json'
  }
});
```

### Caching Strategy

Implement proper caching for translation files:

```nginx
location /locales/ {
    expires 1d;
    add_header Cache-Control "public, immutable";
}
```

### Performance Optimization

- Lazy load translation namespaces
- Pre-load critical translations
- Use translation memory for consistency
- Implement fallback strategies

## Compliance and Standards

### Energy Industry Standards

- **IEC 61850**: International standard terminology
- **IEEE Standards**: Consistent electrical terminology
- **NERC Glossary**: North American reliability terms

### Accessibility (WCAG 2.1)

- Proper language attributes
- RTL reading flow
- High contrast support
- Screen reader compatibility

## Support and Resources

- **Translation Management**: Contact i18n@quantenergx.com
- **RTL Issues**: Report to rtl-support@quantenergx.com
- **Energy Terms**: Consult energy-glossary@quantenergx.com
- **Documentation**: https://docs.quantenergx.com/i18n